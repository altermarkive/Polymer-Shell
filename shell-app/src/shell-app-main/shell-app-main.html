<link rel="import" href="../../bower_components/polymer/polymer-element.html"/>
<link rel="import" href="../../bower_components/app-layout/app-header/app-header.html"/>
<link rel="import" href="../../bower_components/app-layout/app-toolbar/app-toolbar.html"/>
<link rel="import" href="../../bower_components/paper-button/paper-button.html"/>
<link rel="import" href="../../bower_components/paper-slider/paper-slider.html"/>

<dom-module id="shell-app-main">
  <template>
    <style>
      * {
        font-family: 'Roboto', sans-serif;
        -webkit-font-smoothing: antialiased;
      }

      :host {
        display: block;
      }

      pre {
        font-family: 'Roboto Mono', monospace;
      }

      app-toolbar {
        background-color: #4285f4;
        color: #fff;
        height: 64px
      }
      paper-button {
        font-weight: normal;
        font-size: 14px;
        max-height: 32px;
        color: #fff;
      }
      paper-input {
        width: 80%;
        color: red;
        --paper-input-container-color: white;
        --paper-input-container-focus-color: white;
        --paper-input-container-invalid-color: white;
        --paper-input-container-input-color: white;
      }
      </style>
    <app-header reveals>
      <app-toolbar>
        <div main-title>[[title]]</div>
        <paper-input no-label-float label="Command" value="{{command}}"></paper-input>
        <paper-button raised on-tap="runCommand">Run</paper-button>
      </app-toolbar>
    </app-header>
    <div id="history" style="position: absolute; top:64px; bottom:0; overflow-y:scroll; width:100%; color: black; background-color: white;"><pre>{{shell}}</pre><div id="terminator"></div></div>
  </template>

  <script>
    class ShellAppMain extends Polymer.Element {
      static get is() { return 'shell-app-main'; }
      static get properties() {
        return {
          title: {
            type: String,
            value: 'Polymer Shell'
          }
        };
      }
      runCommand(event){
        var command = this.command;
        if ("undefined" !== typeof command) {
          var shell = "";
          if ("undefined" !== typeof this.shell) {
            shell = this.shell;
          }
          this.shell = shell + command + "\n";
          var terminator = this.$.terminator;
          var history = this.$.history;
          history.scrollTop = terminator.offsetTop;
        }
      }
    }

    window.customElements.define(ShellAppMain.is, ShellAppMain);
  </script>
</dom-module>
